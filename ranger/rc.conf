# ===================================================================
# RANGER CONFIG — Cleaned & Optimized (Kitty + w3m + Devicons + Gruvbox)
# ===================================================================

# ──────────────────────────────
#   LAYOUT & VIEW SETTINGS
# ──────────────────────────────
set viewmode miller
set column_ratios 1,3,4
set draw_borders both
set collapse_preview false
set preview_files true
set preview_directories true
set display_size_in_main_column true
set display_size_in_status_bar true
set show_hidden true
map zh set show_hidden!

# ──────────────────────────────
#   ICONS AND VISUALS
# ──────────────────────────────
default_linemode devicons
set colorscheme default
set padding_right true
set status_bar_on_top true
set draw_progress_bar_in_status_bar true
set draw_borders both
set mouse_enabled true
set flushinput true
set show_cursor false

# ──────────────────────────────
#   IMAGE PREVIEW (Kitty/W3M)
# ──────────────────────────────
set preview_images true
set preview_images_method w3m
set w3m_delay 0.02
set w3m_offset 0
set wrap_plaintext_previews false
set use_preview_script true
set preview_max_size 0
set open_all_images true
set collapse_preview true

# ──────────────────────────────
#   BEHAVIOR & PERFORMANCE
# ──────────────────────────────
set automatically_count_files true
set confirm_on_delete multiple
set vcs_aware false
set vcs_backend_git enabled
set autoupdate_cumulative_size false
set autosave_bookmarks true
set show_selection_in_titlebar true
set idle_delay 2000
set line_numbers false
set global_inode_type_filter
set size_in_bytes false
set nested_ranger_warning true
set show_hidden_bookmarks true

# ──────────────────────────────
#   SORTING & FILTERS
# ──────────────────────────────
set sort natural
set sort_reverse false
set sort_case_insensitive true
set sort_directories_first true
set sort_unicode false
set hidden_filter ^\.|\.(?:pyc|pyo|bak|swp)$|^lost\+found$|^__(py)?cache__$
set clear_filters_on_dir_change false

# ──────────────────────────────
#   TITLE, TABS & DISPLAY
# ──────────────────────────────
set update_tmux_title true
set shorten_title 3
set hostname_in_titlebar true
set dirname_in_tabs true
set tilde_in_titlebar false
set update_title false
set padding_right true
set save_console_history true
set save_tabs_on_exit false
set scroll_offset 8

# ──────────────────────────────
#   BOOKMARKS & HISTORY
# ──────────────────────────────
set autosave_bookmarks true
set save_backtick_bookmark true
set max_history_size 20
set max_console_history_size 50
set show_hidden_bookmarks true

# ──────────────────────────────
#   KEY BINDINGS (CORE)
# ──────────────────────────────
map     Q quitall
map     q quit
copymap q ZZ ZQ
map R reload_cwd
map F set freeze_files!
map <C-r> reset
map <C-l> redraw_window
map <esc> change_mode normal
map i display_file
map ? help
map S shell $SHELL
map : console
map ; console
map cd console cd%space
map gh cd ~
map gr cd /
map gv cd /var
map gp cd /tmp
map gm cd /media
map gM cd /mnt
map gd cd /dev
map gu cd /usr
map go cd /opt

# ──────────────────────────────
#   NAVIGATION
# ──────────────────────────────
map <UP> move up=1
map <DOWN> move down=1
map <LEFT> move left=1
map <RIGHT> move right=1
copymap <UP> k
copymap <DOWN> j
copymap <LEFT> h
copymap <RIGHT> l
map gg move to=0
map G move to=-1
map J move down=0.5 pages=True
map K move up=0.5 pages=True

# ──────────────────────────────
#   FILE OPERATIONS
# ──────────────────────────────
map yy copy
map dd cut
map pp paste
map dD console delete
map cw console rename%space
map a rename_append
map A eval fm.open_console('rename ' + fm.thisfile.relative_path.replace("%", "%%"))
map E edit

# ──────────────────────────────
#   SEARCHING
# ──────────────────────────────
map / console search%space
map n search_next
map N search_next forward=False

# ──────────────────────────────
#   TABS
# ──────────────────────────────
map <C-n> tab_new
map <C-w> tab_close
map <TAB> tab_move 1
map <S-TAB> tab_move -1
map gt tab_move 1
map gT tab_move -1

# ──────────────────────────────
#   TOGGLES
# ──────────────────────────────
map zh set show_hidden!
map zc set collapse_preview!
map zd set sort_directories_first!
map zi set preview_images!
map zm set mouse_enabled!
map zp set preview_files!
map zP set preview_directories!
map zs set sort_case_insensitive!
map zv set use_preview_script!
map zf console filter%space

# ──────────────────────────────
#   ICON MODE
# ──────────────────────────────
default_linemode devicons

#──────────────────────────────


# ===================================================================
# END OF CONFIG
# ===================================================================


